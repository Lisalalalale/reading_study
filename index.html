<!DOCTYPE html>
<html>
  <head>
    <title>Lesestudie</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: rgb(255,255,255);
      }
      h3 {
        text-align: center;
        padding: 1rem;
      }
      p {
        width: 80%;
        margin: 0 auto;
        padding: 1rem;
        text-align: justify;
        font-size: 16px;
      }
      @media (max-width: 700px) {
        p {
          width: 90%;
        }
      }
      #text-size-form {
        text-align: center;
        padding: 1rem;
      }
      #text-size-input {
        width: 60px;
      }
      #text-toggle-button {
      display: block;
      margin: 0 auto;
      padding: 1rem;
      text-align: center;
      }
      #color-form {
        direction: ltr;
        text-align: center;
        padding: 1 rem;
      }
      #color-slider {
        display: block;
        margin: 0 auto;
        width: 60%;
      }

    </style>
  </head>
  <body>
    <h3>Stelle den Text so ein, dass er für dich angenehm zu lesen ist.</h3>
    <form id="text-size-form">
      <label for="text-size-input">Schriftgröße:</label>
      <input type="number" id="text-size-input" value="16">
    </form>
    <form id="color-form">
      <label for="color-slider">Helligkeit:</label>
      <input type="range" id="color-slider" min="200" max="255" value="255">
    </form>
    <p id="lorem-ipsum">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed at justo accumsan, semper dolor eget, vestibulum mauris. Aliquam erat volutpat. In ut congue lacus. Fusce iaculis bibendum facilisis. Nullam ut suscipit nisi. Nullam viverra blandit dolor, vitae suscipit orci tempor id. Sed id orci viverra, aliquam mi non, congue mauris. Integer eget aliquam orci. Sed congue magna at dolor hendrerit, a tincidunt nunc mollis. Quisque tincidunt, dui vel pellentesque rutrum, sapien sapien tristique justo, vel tempor velit velit vel est.</p>
    <p id="info-text"> Wenn du den Button klickst, siehst du den Text und die Zeit wird gemessen. </p>
    <button id="text-toggle-button">Los gehts!</button>
    <script>
      const textSizeInput = document.getElementById("text-size-input");
      const loremIpsum = document.getElementById("lorem-ipsum");
      const brightnessSlider = document.getElementById("color-slider");
      const infotext = document.getElementById("info-text")
      const textToggleButton = document.getElementById("text-toggle-button");

      

      textSizeInput.addEventListener("input", function(event) {
        loremIpsum.style.fontSize = textSizeInput.value + "px";
        infotext.style.fontSize = textSizeInput.value + "px";

      });
      
      brightnessSlider.addEventListener("input", function(event) {
        const colorValue = brightnessSlider.value;
        const backgroundColor = `rgb(${colorValue}, ${colorValue}, ${colorValue})`;
        document.body.style.backgroundColor = backgroundColor;
      });


      textToggleButton.addEventListener("click", disableAll);
      const body = document.body;
      const textSize = textSizeInput.value + "px";
      displayText();
      
      const newButton = document.createElement("button");
      //Button stylen
      newButton.addEventListener("click", stopTimer);
      

      



      function disableAll() {
        
        const elements = document.querySelectorAll("h3, p, form,button, input")

        elements.forEach((element) => {
          element.remove()
        })
          const timer = document.createElement("p");
          timer.id="timer";
          body.appendChild(timer);
          
          body.appendChild(newButton);
          startTimer();
      }
        let startTime, endTime, elapsedTime;
        let timerInterval;

        function startTimer() {
          // Store the start time
          startTime = new Date();

          // Start the timer
          timerInterval = setInterval(updateTimer, 1000);
        }

        function stopTimer() {
          // Stop the timer
          clearInterval(timerInterval);
        }

        function updateTimer() {
          // Calculate the elapsed time
          endTime = new Date();
          elapsedTime = Math.floor((endTime - startTime) / 1000);

          // Format the time as HH:MM:SS
          const hours = Math.floor(elapsedTime / 3600);
          const minutes = Math.floor((elapsedTime % 3600) / 60);
          const seconds = elapsedTime % 60;
          const formattedTime = `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;

          document.getElementById("timer").innerHTML = formattedTime;

    
        }

        function pad(value) {
          // Add leading zeros to single-digit values
          return value < 10 ? `0${value}` : value;
        }


        function displayText(){
        fetch("text.txt")
        .then(response => response.text())
        .then(data => {
          const newPara = document.createElement("p");
          const textNode = document.createTextNode(data);
          newPara.appendChild(textNode);
          newPara.style.fontSize = textSize;
          newPara.style.textAlign = "center";
          body.appendChild(newPara);
        })
        .catch(error => console.error(error));
      }
      
     
      
    </script>
  </body>
</html>
